{{ define "title" }}Files {{ .Path }} â€” LOD2.zip{{ end }}

{{ define "meta" }}
  <style>
    table.data {
      table-layout: fixed;
      width: 100%;
    }

    .file-name {
      width: 60%;
    }

    .file-size {
      width: 15%;
    }

    .file-last-modified {
      width: 25%;
    }
  </style>
{{ end }}

{{ define "content" }}
  <header class="h">
    <nav class="breadcrumbs">
      <a href="/files/">Files</a>
      {{ range .PathBreadcrumbs }}
        <a href="/files/{{ .Path }}">{{ .Component }}</a>
      {{ end }}
    </nav>
  </header>

  {{ if .ErrorMessage }}
    <div class="v gap-2 flex-1">
      <div class="alert align-self-center">
        {{ .ErrorMessage }}
      </div>
    </div>
  {{ else }}

    {{ if .IsDirectory }}
      <div class="table-container paper">
        <table class="data padding">
          <thead>
            <tr>
              <th class="file-name">Name</th>
              <th class="file-size">Size</th>
              <th class="file-last-modified">Last modified</th>
            </tr>
          </thead>
          <tbody>
            {{ if not (eq .Path "/") }}
              <tr>
                <td colspan="3">
                  <a href="/files{{ .Path }}/.." class="link"
                    ><strong>..</strong></a
                  >
                </td>
              </tr>
            {{ end }}
            {{ if .Entries }}
              {{ range .Entries }}
                <tr>
                  <td
                    {{ if .IsDirectory }}
                      colspan="2"
                    {{ end }}
                  >
                    <a href="/files{{ $.Path }}{{ .Name }}" class="link"
                      >{{ if .IsDirectory }}
                        <strong>{{ .Name }}</strong>
                      {{ else }}
                        {{ .Name }}
                      {{ end }}</a
                    >
                  </td>
                  {{ if not .IsDirectory }}
                    <td title="{{ .Size }} bytes">
                      {{ .Size | humanizeBytes }}
                    </td>
                  {{ end }}
                  <td>
                    <time datetime="{{ .LastModified }}"
                      >{{ .LastModified | ago }} ago</time
                    >
                  </td>
                </tr>
              {{ end }}
            {{ else }}
              <tr>
                <td colspan="3">there is nothing here</td>
              </tr>
            {{ end }}
          </tbody>
        </table>
      </div>
    {{ else }}
      <div class="alert info align-self-center">haha im a file! :D</div>
    {{ end }}

  {{ end }}
{{ end }}

{{ template "layout/main.html" . }}
